---
import Modal from "../utils/Modal.astro";
import {iconsMapping, Project} from "../../../resources/data";
export interface Props {
    project: Project
}

const {
    project
} = Astro.props;

const {
    title,
    description,
    shortDescription,
    date,
    stack,
} = project;
const icons = () => stack.reduce((acc, el) => iconsMapping[el] ? acc.concat([iconsMapping[el]]) : acc, []);
---

<style xmlns="http://www.w3.org/1999/xhtml">
    .timeline-card {
        display: flex;
        gap: 6em;
        justify-content: space-between;
    }

    .timeline-card div {
        display: flex;
        justify-content: flex-start;
        flex-direction: column;
    }

    h2 {
        margin: 0;
    }

    h4 {
        margin: .5em 0;
    }

    p {
        color: var(--text-secondary);
        width: max-content;
        margin: 0;
    }

</style>

<div class="timeline timeline-card">
    <div>
        <h2>{title}</h2>
        <p>{shortDescription}</p>
        <span>
        {icons().map(i => <img src={i} width="32" height="32" alt=""/>)}
            </span>
    </div>
    <div style="justify-content: space-between">
        <small>{date}</small>
        <Modal id={title} title={title}>
            <div style="display: flex; justify-content: center; align-items: center">
                <img alt="modal-image" style="height: 16rem; width: 16rem; object-fit: cover" src={project.img}/>
            </div>
            <h4>Tech stack</h4>
            {project.stack.map((t, i) => <span class="badge"
                                               style={`background: ${i % 2 ? 'var(--grad-red)' : 'var(--grad-violet)'}`}>{t}</span>)}
            <h4>Description</h4>
            {description}

        </Modal>
    </div>
</div>
